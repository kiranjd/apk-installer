# THIS IS AUTOGENERATED. DO NOT EDIT MANUALLY
version = 1
name = "apk-installer"

[setup]
script = ""

[[actions]]
name = "Run"
icon = "run"
command = '''
pkill -x APKInstaller || true
cd "$(git rev-parse --show-toplevel)"
SDK_ROOT="${ANDROID_SDK_ROOT:-${ANDROID_HOME:-$HOME/Library/Android/sdk}}"
EMULATOR_BIN="${APKINSTALLER_EMULATOR_BIN:-$SDK_ROOT/emulator/emulator}"
if [[ -x "$EMULATOR_BIN" ]]; then
  nohup "$EMULATOR_BIN" -avd "${APKINSTALLER_AVD:-APKInstaller_API34}" >/tmp/apkinstaller-emulator.log 2>&1 &
else
  echo "Skipping emulator launch: set APKINSTALLER_EMULATOR_BIN or ANDROID_SDK_ROOT/ANDROID_HOME."
fi
./scripts/build_local.sh && open -na "$(pwd)/DerivedData/Build/Products/Debug/APKInstaller.app"
'''
